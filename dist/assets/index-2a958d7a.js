import{a as g,ae as F,af as x,o as v,e as D,k as e,l as s,y as f,g as h,H as T,G as V,K as B}from"./index-dc0fea34.js";import{E as I}from"./el-card-e84261e5.js";import{_ as $,s as M,d as N,E as H,a as A}from"./whitelistedit.vue_vue_type_script_setup_true_lang-13c81e17.js";import{E as G,a as K}from"./request-36db6a9f.js";import"./axios-59617da3.js";const R=g({__name:"whitelist",setup(y){const i=t=>{const o=new Date(t),n=o.getFullYear(),a=("0"+(o.getMonth()+1)).slice(-2),u=("0"+o.getDate()).slice(-2),r=("0"+o.getHours()).slice(-2),m=("0"+o.getMinutes()).slice(-2),E=("0"+o.getSeconds()).slice(-2);return n+"-"+a+"-"+u+" "+r+":"+m+":"+E},c=new Date().getTime(),d=F({tableData:[],dialogFormVisible:!1,rowData:{}}),{tableData:b,rowData:l,dialogFormVisible:_}=x(d),p=()=>{M().then(t=>{t.code===200&&(b.value=t.data)})},w=t=>{l.value=t,_.value=!0,l.value.id?(l.value=t,l.value.updateTime=i(c)):(l.value={updateTime:i(c)},console.log(i(c)))},C=t=>{l.value=t,N(l.value.id).then(o=>{o.code===200&&(G({showClose:!0,message:"修改成功",type:"success"}),p())})},k=t=>{_.value=!1,l.value={},t==="reload"&&p()};return p(),(t,o)=>{const n=K,a=H,u=A;return v(),D(T,null,[e(n,{type:"primary",onClick:w},{default:s(()=>[f("新建白名单")]),_:1}),e($,{dialogFormVisible:h(_),onClose:k,ruleForm:h(l)},null,8,["dialogFormVisible","ruleForm"]),e(u,{data:h(b),style:{width:"100%"}},{default:s(()=>[e(a,{prop:"id",label:"唯一ID",width:"80"}),e(a,{prop:"hashId",label:"硬件特征码",width:"340"}),e(a,{prop:"name",label:"姓名",width:"80"}),e(a,{prop:"employeeId",label:"工号",width:"90"}),e(a,{prop:"computerName",label:"电脑名称",width:"180"}),e(a,{prop:"reason",label:"开通理由",width:"200"}),e(a,{prop:"type",label:"白名单类型",width:"180"}),e(a,{prop:"updateTime",label:"白名单上传时间"}),e(a,{label:"操作"},{default:s(({row:r})=>[e(n,{type:"primary",onClick:m=>w(r)},{default:s(()=>[f("编辑")]),_:2},1032,["onClick"]),e(n,{type:"danger",onClick:m=>C(r)},{default:s(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])],64)}}});const S=V(R,[["__scopeId","data-v-149f3fa2"]]),J=g({__name:"index",setup(y){return(i,c)=>{const d=I;return v(),B(d,{class:"card",shadow:"always"},{default:s(()=>[e(S)]),_:1})}}});export{J as default};
